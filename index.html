<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>waterfall</title>
  <style>
    html *{
      padding: 0;
      margin: 0;
    }
  </style>
  <link rel="stylesheet" href="load.css">
</head>

<body>
  <style>
    #waterfall {
      position: relative;
    }
    .waterfall-box {
      float: left;
      padding-left: 10px;
      padding-bottom: 10px;
      width: 200px;
      border-radius: 2px;
    }
  </style>
  <div id="waterfall">
    <img src="images/1.png" class="waterfall-box">
    <img src="images/2.png" class="waterfall-box">
    <img src="images/3.png" class="waterfall-box">
    <img src="images/4.png" class="waterfall-box">
    <img src="images/5.png" class="waterfall-box">
    <img src="images/6.png" class="waterfall-box">
    <img src="images/7.png" class="waterfall-box">
    <img src="images/8.png" class="waterfall-box">
    <img src="images/9.png" class="waterfall-box">
    <img src="images/10.png" class="waterfall-box">
    <img src="images/11.png" class="waterfall-box">
    <img src="images/12.png" class="waterfall-box">
    <img src="images/13.png" class="waterfall-box">
    <img src="images/14.png" class="waterfall-box">
    <img src="images/15.png" class="waterfall-box">
    <img src="images/16.png" class="waterfall-box">
    <img src="images/17.png" class="waterfall-box">
    <img src="images/18.png" class="waterfall-box">
    <img src="images/19.png" class="waterfall-box">
    <img src="images/20.png" class="waterfall-box">
    <!-- <div class="loading"></div> -->
  </div>
  <script src="waterfall.js"></script>
  <script>
    const waterfall = new Waterfall({
      number: 20,                 // 一次性加载的图片个数；必填
      // width: 1250,             // 容器 width；选填：设置 width 的话，使 window.resize 事件失效
      // container: 'waterfall',  // 容器 id；选填：默认为 'waterfall'
    })

    waterfall.on("load", function() {
      // const $waterfall = document.getElementById('waterfall')
      // const imgList = $waterfall.getElementsByTagName('img')
      // const fragment = document.createDocumentFragment()
      // for (let i = 0; i < 20; i++) {
      //   const img = document.createElement('img')
      //   img.setAttribute('src', `images/${i + 1}.png`)
      //   img.setAttribute('class', 'waterfall-box')
      //   fragment.appendChild(img)
      // }
      // $waterfall.appendChild(fragment)
      // waterfall.done()

      setTimeout(function() {
        console.log(1)
        const $waterfall = document.getElementById('waterfall')
        const imgList = $waterfall.getElementsByTagName('img')
        const fragment = document.createDocumentFragment()
        for (let i = 0; i < 20; i++) {
          const img = document.createElement('img')
          img.setAttribute('src', `images/${i + 1}.png`)
          img.setAttribute('class', 'waterfall-box')
          fragment.appendChild(img)
        }
        $waterfall.appendChild(fragment)
        waterfall.done()
      }, 2000)
    })
  </script>
</body>
</html>